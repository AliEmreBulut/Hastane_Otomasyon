<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bulut Hastanesi – Admin Paneli</title>

    <link rel="stylesheet" href="../css/bootstrap.min.css">

    <link rel="stylesheet" href="../css/style.css?v=3">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark navbar-custom sticky-top shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand fw-bold" href="#"><i class="bi bi-hospital"></i> Bulut Hastanesi - Admin</a>

            <div class="d-flex align-items-center gap-3">

                <div class="input-group input-group-sm" style="width: 250px;">
                    <span class="input-group-text bg-white border-0 text-secondary pe-2 rounded-start">
                        <i class="bi bi-search"></i>
                    </span>
                    <input type="text" id="u-ara" class="form-control border-0 shadow-none ps-1 rounded-end" placeholder="Kullanıcı Ara..." onkeyup="filterUsers()">
                </div>

                <a href="/giris.html" class="btn btn-outline-light btn-sm text-nowrap">Çıkış Yap</a>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-3 col-lg-2 d-md-block sidebar py-4">
                <div class="text-center mb-4 text-white">
                    <div class="rounded-circle bg-danger text-white d-inline-flex align-items-center justify-content-center shadow-sm" style="width: 60px; height: 60px; font-size: 24px;">AD</div>
                    <h6 class="mt-3 fw-light">Sistem Yöneticisi</h6>
                </div>
                <div class="px-3 mt-4">
                    <a href="#ozet"><i class="bi bi-pie-chart me-2"></i> Genel Özet</a>
                    <a href="#doktorlar"><i class="bi bi-person-heart me-2"></i> Doktor Yönetimi</a>
                    <a href="#hastalar"><i class="bi bi-people me-2"></i> Hasta Yönetimi</a>
                    <a href="#randevu-yonet"><i class="bi bi-calendar-range me-2"></i> Randevu Yönetimi</a>
                    <a href="#klinikler"><i class="bi bi-building me-2"></i> Klinikler</a>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 py-4">

                <section id="ozet" class="row mb-4 g-3">
                    <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div><p class="text-muted mb-1 fs-6">Aktif Hasta</p><h3 class="mb-0 text-primary fw-bold" id="stat-patients">0</h3></div>
                                <div class="bg-primary bg-opacity-10 p-3 rounded-circle text-primary"><i class="bi bi-people fs-4"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div><p class="text-muted mb-1 fs-6">Aktif Doktor</p><h3 class="mb-0 text-success fw-bold" id="stat-doctors">0</h3></div>
                                <div class="bg-success bg-opacity-10 p-3 rounded-circle text-success"><i class="bi bi-person-heart fs-4"></i></div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body d-flex justify-content-between align-items-center">
                                <div><p class="text-muted mb-1 fs-6">Randevular</p><h3 class="mb-0 text-warning fw-bold" id="stat-appts">0</h3></div>
                                <div class="bg-warning bg-opacity-10 p-3 rounded-circle text-warning"><i class="bi bi-calendar-check fs-4"></i></div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="doktorlar" class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="bi bi-person-heart me-2 text-secondary"></i>Doktor Listesi</h5>
                        <button class="btn btn-primary btn-sm" onclick="document.getElementById('doctorModal').style.display='flex'">+ Yeni Ekle</button>
                    </div>
                    <div class="card-body p-0 table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light text-muted small">
                                <tr>
                                    <th class="ps-4">Ad Soyad</th>
                                    <th>Bölüm / Klinik</th>
                                    <th>E-posta</th>
                                    <th class="text-center">Durum</th>
                                    <th class="text-end pe-4">İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="tDoctors" class="border-top-0"></tbody>
                        </table>
                    </div>
                </section>

                <section id="hastalar" class="card mb-4">
                    <div class="card-header"><h5 class="mb-0"><i class="bi bi-people me-2 text-secondary"></i>Hasta Listesi</h5></div>
                    <div class="card-body p-0 table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light text-muted small">
                                <tr>
                                    <th class="ps-4">Ad Soyad</th>
                                    <th>TC Kimlik</th>
                                    <th>E-posta</th>
                                    <th class="text-center">Durum</th>
                                    <th class="text-end pe-4">İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="tPatients" class="border-top-0"></tbody>
                        </table>
                    </div>
                </section>

                <section id="randevu-yonet" class="card mb-4">
                    <div class="card-header"><h5 class="mb-0"><i class="bi bi-calendar-range me-2 text-secondary"></i>Tüm Randevular</h5></div>
                    <div class="card-body p-0 table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light text-muted small">
                                <tr>
                                    <th class="ps-4">Tarih/Saat</th>
                                    <th>Klinik</th>
                                    <th>Doktor</th>
                                    <th>Hasta</th>
                                    <th>Durum</th>
                                    <th class="text-end pe-4">İşlemler</th>
                                </tr>
                            </thead>
                            <tbody id="tAppts" class="border-top-0"></tbody>
                        </table>
                    </div>
                </section>

                <section id="klinikler" class="card mb-4">
                    <div class="card-header"><h5 class="mb-0"><i class="bi bi-building me-2 text-secondary"></i>Aktif Klinikler</h5></div>
                    <div class="card-body p-0 table-responsive">
                        <table class="table table-hover align-middle mb-0">
                            <thead class="table-light text-muted small">
                                <tr>
                                    <th class="ps-4">Klinik Adı</th>
                                    <th class="text-center">Kayıtlı Doktor</th>
                                    <th class="text-end pe-4">Durum</th>
                                </tr>
                            </thead>
                            <tbody id="tClinics" class="border-top-0"></tbody>
                        </table>
                    </div>
                </section>

            </main>
        </div>
    </div>

    <div id="doctorModal" class="position-fixed top-0 start-0 w-100 h-100 d-flex justify-content-center align-items-center modal-overlay" style="display:none !important;">
        <div class="card shadow-lg border-0" style="width: 100%; max-width: 500px;">
            <div class="card-header bg-white d-flex justify-content-between align-items-center py-3">
                <h5 class="mb-0"><i class="bi bi-person-plus me-2"></i>Yeni Doktor Kaydı</h5>
                <button type="button" onclick="document.getElementById('doctorModal').style.setProperty('display', 'none', 'important')" class="btn-close"></button>
            </div>
            <div class="card-body p-4">
                <form id="addDoctorForm" onsubmit="submitDoctor(event)">
                    <div class="row g-2 mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted small">Kullanıcı Adı</label>
                            <input id="d-user" class="form-control" required />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted small">Şifre</label>
                            <input id="d-pass" type="password" class="form-control" required />
                        </div>
                    </div>
                    <div class="row g-2 mb-3">
                        <div class="col-md-6">
                            <label class="form-label text-muted small">Ad</label>
                            <input id="d-first" class="form-control" required />
                        </div>
                        <div class="col-md-6">
                            <label class="form-label text-muted small">Soyad</label>
                            <input id="d-last" class="form-control" required />
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label text-muted small">E-posta</label>
                        <input id="d-mail" type="email" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label text-muted small">Telefon</label>
                        <input id="d-phone" type="tel" class="form-control" required />
                    </div>
                    <div class="mb-4">
                        <label class="form-label text-muted small">Departman ID (Örn: 1 Dahiliye, 2 Kardiyoloji)</label>
                        <input id="d-dep" type="number" class="form-control" required />
                    </div>
                    <div class="text-end pt-3 border-top">
                        <button type="button" class="btn btn-light me-2" onclick="document.getElementById('doctorModal').style.setProperty('display', 'none', 'important')">İptal</button>
                        <button type="submit" class="btn btn-primary px-4">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    



    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="../js/bootstrap.bundle.min.js"></script>
    <script>window.API_BASE = "https://localhost:7185/api";</script>

    <script type="module" src="../js/admin-panel.js"></script>
</body>
</html>